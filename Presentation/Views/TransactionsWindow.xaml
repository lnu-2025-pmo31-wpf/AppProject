<Window x:Class="Presentation.Views.TransactionsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:Presentation.ViewModels"
        xmlns:validation="clr-namespace:Presentation.Validation"
        Title="Transactions"
        Height="450"
        Width="800"
        WindowStartupLocation="CenterScreen">

    

    <DockPanel>

        <!-- MENU -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="Файл">
                <MenuItem Header="Вихід"/>
            </MenuItem>
        </Menu>

        <Grid Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- ADD PANEL -->
            <GroupBox Header="Нова транзакція" Margin="0 0 0 10">
                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>

                    <!-- AMOUNT -->
                    <StackPanel>
                        <TextBlock Text="Сума"/>
                        <TextBox Width="200">
                            <TextBox.Text>
                                <Binding Path="Amount"
                                         UpdateSourceTrigger="PropertyChanged">
                                    <Binding.ValidationRules>
                                        <validation:NotEmptyRule/>
                                    </Binding.ValidationRules>
                                </Binding>
                            </TextBox.Text>
                        </TextBox>
                    </StackPanel>

                    <!-- CATEGORY -->
                    <StackPanel Grid.Column="1">
                        <TextBlock Text="Категорія"/>
                        <TextBox Width="200">
                            <TextBox.Text>
                                <Binding Path="Category"
                                         UpdateSourceTrigger="PropertyChanged">
                                    <Binding.ValidationRules>
                                        <validation:NotEmptyRule/>
                                    </Binding.ValidationRules>
                                </Binding>
                            </TextBox.Text>
                        </TextBox>
                    </StackPanel>

                    <!-- BUTTON -->
                    <Button Grid.Column="2"
                            Content="Додати"
                            Width="120"
                            Height="30"
                            Margin="20 20 0 0"
                            Command="{Binding AddCommand}"/>
                </Grid>
            </GroupBox>

            <!-- TABLE -->
            <DataGrid Grid.Row="1"
                      ItemsSource="{Binding Transactions}"
                      AutoGenerateColumns="False"
                      IsReadOnly="True">

                <DataGrid.Columns>
                    <DataGridTextColumn Header="Сума" Binding="{Binding Amount}"/>
                    <DataGridTextColumn Header="Категорія" Binding="{Binding Category}"/>
                    <DataGridTextColumn Header="Дата" Binding="{Binding Date}"/>
                </DataGrid.Columns>

                <!-- CONTEXT MENU -->
                <DataGrid.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Видалити"
                                  Command="{Binding DeleteCommand}"
                                  CommandParameter="{Binding PlacementTarget.SelectedItem,
                                  RelativeSource={RelativeSource AncestorType=ContextMenu}}"/>
                    </ContextMenu>
                </DataGrid.ContextMenu>

            </DataGrid>

        </Grid>
    </DockPanel>
</Window>
